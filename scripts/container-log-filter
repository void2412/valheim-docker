#!/bin/bash
# Log filter for valheim-server output at supervisord level
# Filters doorstop warnings and outputs to Docker logs



while IFS= read -r line; do
    # Skip doorstop warnings (harmless on glibc 2.34+)
    [[ "$line" == *"Failed to hook"* ]] && continue
    [[ "$line" == *"no such function"* ]] && continue

    # Skip empty lines
    [[ -z "$line" ]] && continue

    # Output to Docker stdout
    echo "$line"
done
